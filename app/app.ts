import{ctx,c}from "./canvas";import{ctrlb,mb}from "./controls";import{cls,eb,clb,dlb,dfb,sb}from "./appDefinitions";let fm=false;ctx.lineWidth=5;ctx.lineCap="round";ctx.lineJoin="round";for(const cl of cls){const cb=mb(cl);cb.style.backgroundColor=cl;cb.addEventListener("click",()=>{ctx.strokeStyle=cl;ctx.fillStyle=cl})}clb.addEventListener("click",()=>{ctx.clearRect(0,0,c.width,c.height)});eb.addEventListener("click",()=>{fm=true;ctx.strokeStyle="white";ctx.fillStyle="white"});c.addEventListener("mousedown",(event)=>{ctx.beginPath();ctx.moveTo(event.offsetX,event.offsetY)});c.addEventListener("mousemove",(event)=>{if(event.buttons===1){ctx.lineTo(event.offsetX,event.offsetY)}});c.addEventListener("mouseup",()=>{if(fm===true){ctx.fill()}else{ctx.stroke()}});dfb.addEventListener("click",()=>{fm=true;ctx.strokeStyle="black";ctx.fillStyle="black"});dlb.addEventListener("click",()=>{fm=false;ctx.strokeStyle="black"});sb.addEventListener("click",()=>{const l:HTMLElement=document.getElementById("link");l.setAttribute("download","CanvasImage.png");l.setAttribute("href",c.toDataURL("image/png").replace("image/png","image/octet-stream"));l.click()});